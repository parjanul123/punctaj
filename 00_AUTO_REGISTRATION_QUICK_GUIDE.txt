# ğŸ¯ AUTO-REGISTRATION - QUICK REFERENCE

## â“ Ce se intampla?

Cand te conectezi cu Discord:

```
Tu apasa "Login cu Discord"
        â†“
Discord aproba
        â†“
Aplicatie primeste: username, id, email
        â†“
Aplicatie CAUTA in Supabase cu discord_id
        â†“
    GASIT?        NU GASIT?
      â†“               â†“
  UPDATE          INSERT NEW
  login_time      user automat
      â†“               â†“
  âœ… GATA        âœ… CREAT
```

## âœ… Rezultat

### Daca USER EXISTA:
- Locat normal
- `last_login` se actualizeaza
- Acces cu permisiunile pe care le-a avut anterior

### Daca USER NU EXISTA:
- Se CREEAZA AUTOMAT
- Discord username, id, email se salveaza
- **FARA PERMISIUNI** (role = VIEWER)
- Admin trebuie sa-i dea acces

## ğŸ” In Console

### User existent:
```
âœ… User already exists in Supabase: JohnDoe
âœ… User last_login updated in Supabase
```

### User nou:
```
â• User NOT found in Supabase - creating new account...
âœ… NEW USER CREATED IN SUPABASE
   Initial Permissions: NONE (role: VIEWER)
   Status: âœ… Ready - Admin can assign permissions
```

## âš™ï¸ In Supabase

Userilor noi le se creeaza cu:
```
discord_username: "JohnDoe"
discord_id: "123456789"
discord_email: "john@discord.com"
created_at: "2026-02-03T10:30:00"
last_login: "2026-02-03T10:30:00"
active: TRUE
is_superuser: FALSE
is_admin: FALSE
can_view: FALSE        ğŸ‘ˆ FARA ACCES!
can_edit: FALSE
can_delete: FALSE
granular_permissions: {}
```

## ğŸ¯ Pentru Admin

1. User se conecteaza cu Discord
2. Se creeaza AUTOMAT in Supabase
3. **FARA PERMISIUNI** initial
4. Admin trebuie sa:
   - Deschide Admin Panel
   - Selecteaza user
   - Aloca permisiuni
   - Apasa "Save"
5. User vede permisiuni in max 5 sec (sincronizare!)

## ğŸš¨ Probleme Posibile

| Problema | Solutie |
|----------|---------|
| User nu se creeaza | Check: Supabase online? Internet OK? |
| User creat dar nu apare | Refresh Supabase dashboard |
| User creat dar fara email | Email nu e obligatoriu, OK |
| User creat 2 ori (duplicate) | Imposibil - discord_id unique! |

## âœ¨ Features

âœ… **Automatic** - Fara actiuni manuale
âœ… **Instant** - Creat instant la login
âœ… **Safe** - No duplicate users (unique constraint)
âœ… **Smart** - Retry logic daca timeout
âœ… **Logged** - Console messages pt debugging

---

**TL;DR:** Login cu Discord â†’ User creat automat in Supabase (daca e nou) âœ…
